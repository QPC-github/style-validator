javascript:"use strict";var STYLEV=STYLEV||{};STYLEV.isChromeExtension=function(){try{return chrome.runtime.onMessage.addListener(function(){}),!0}catch(e){return!1}}(),STYLEV.isBookmarklet=!STYLEV.isChromeExtension,STYLEV.isReloaded=void 0!==STYLEV.VALIDATOR,STYLEV.isLoaded=!STYLEV.isReloaded,STYLEV.isFirstExecuted=!0,STYLEV.isValidated=STYLEV.isValidated||!1,STYLEV.options={ENABLE_MUTATION_OBSERVER:!0,ENABLE_AUTO_EXECUTION:!1,ENABLE_ANIMATION:!1,SCOPE_SELECTORS:!1,SCOPE_SELECTORS_TEXT:"",IGNORE_SELECTORS:!1,IGNORE_SELECTORS_TEXT:"",URL_FILTERS:["//stylev/page/rules.html","//style-validator.github.io/page/rules.html","//localhost:8001/page/rules.html"]},STYLEV.modifiedTargetsArray=STYLEV.modifiedTargetsArray||[],STYLEV.ignoreTargetsArray=STYLEV.ignoreTargetsArray||[],STYLEV.sameElemCount=STYLEV.sameElemCount||0,STYLEV.moid=STYLEV.moid||0,STYLEV.consoleWrapperDynamicHeight=STYLEV.consoleWrapperDynamicHeight||0,STYLEV.consoleScrollTop=STYLEV.consoleScrollTop||0,STYLEV.selectedConsoleLine=STYLEV.selectedConsoleLine||null,STYLEV.scaleMode=STYLEV.scaleMode||"normal",STYLEV.VALIDATOR=STYLEV.VALIDATOR||{execute:function(e){var t=STYLEV.VALIDATOR;return STYLEV.isFirstExecuted?(t.setParameters(),void Promise.all(t.getAllData().concat(t.insertJS4Bookmarklet())).then(function(o){t.rulesData=o[0],t.tagsAllData=o[1],t.tagsEmptyData=o[2],t.tagsReplacedElementData=o[3],t.tagsTableChildren=o[4],t.regexAllHTMLTag=new RegExp("^( "+t.tagsAllData.join(" | ")+" )"),t.regexEmptyElem=new RegExp("^( "+t.tagsEmptyData.join(" | ")+" )"),t.regexReplacedElem=new RegExp("^( "+t.tagsReplacedElementData.join(" | ")+" )"),t.regexTableChildElem=new RegExp("^( "+t.tagsTableChildren.join(" | ")+" )"),t.updateOptions().then(function(){t.moManager=t.setupMutationObserver(),t.validate(e),STYLEV.isFirstExecuted=!1})})):(t.validate(e),!1)},setParameters:function(){var e=STYLEV.VALIDATOR;e.html=document.querySelector("html"),e.head=e.html.querySelector(":scope > head"),e.body=e.html.querySelector(":scope > body"),e.htmlDefaultBorderBottomWidth=""===e.html.style.borderBottomWidth?null:e.html.style.borderBottomWidth,e.RESOURCE_ROOT=e.RESOURCE_ROOT||"http://style-validator.github.io/extension/",e.isObserving=!1,e.isModified=!1,e.settings={OBSERVATION_INTERVAL:3e3,IGNORING_ELEM_ARRAY_RESET_INTERVAL:1e8,CONSOLE_WRAPPER_ID:"stylev-console-wrapper",CONSOLE_LIST_ID:"stylev-console-list",STYLESHEET_ID:"stylev-stylesheet",CONSOLE_WRAPPER_DEFAULT_HEIGHT:200,CONSOLE_HEADING_TEXT:"Style Validator",CONGRATULATION_MESSAGE_TEXT:"It's Perfect!",GA_PATH:e.RESOURCE_ROOT+"google-analytics.js",ICON_REFRESH_PATH:e.RESOURCE_ROOT+"iconmonstr-refresh-3-icon.svg",ICON_REFRESH_ACTIVE_PATH:e.RESOURCE_ROOT+"iconmonstr-refresh-3-icon-active.svg",ICON_CLOSE_PATH:e.RESOURCE_ROOT+"iconmonstr-x-mark-icon.svg",ICON_MINIMIZE_PATH:e.RESOURCE_ROOT+"iconmonstr-minus-2-icon.svg",ICON_NORMALIZE_PATH:e.RESOURCE_ROOT+"iconmonstr-plus-2-icon.svg",ICON_CONNECTED_PATH:e.RESOURCE_ROOT+"iconmonstr-link-4-icon.svg",ICON_DISCONNECTED_PATH:e.RESOURCE_ROOT+"iconmonstr-link-5-icon.svg",ICON_LOGO_PATH:e.RESOURCE_ROOT+"style-validator.logo.black.svg",CONNECTED_2_DEVTOOLS_MESSAGE:"Connected to DevTools",DISCONNECTED_2_DEVTOOLS_MESSAGE:"Disconnected to DevTools",CONNECTED_2_DEVTOOLS_CLASS:"stylev-console-mode-devtools-connected",DISCONNECTED_2_DEVTOOLS_CLASS:"stylev-console-mode-devtools-disconnected"},e.CSS_PATHES=[e.RESOURCE_ROOT+"style-validator-for-elements.css"],e.JS_PATHES=[e.RESOURCE_ROOT+"specificity.js"],e.DATA_PATHES=[e.RESOURCE_ROOT+"data/rules.json",e.RESOURCE_ROOT+"data/tags-all.json",e.RESOURCE_ROOT+"data/tags-empty.json",e.RESOURCE_ROOT+"data/tags-replaced-element.json",e.RESOURCE_ROOT+"data/tags-table-children.json"]},getAllData:function(){var e=STYLEV.VALIDATOR,t=[];return STYLEV.METHODS.each(e.DATA_PATHES,function(o){t.push(e.getDataFromURL(o).then(JSON.parse))}),t},getDataFromURL:function(e){return new Promise(function(t,o){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200===n.status?t(n.responseText):o(new Error(n.statusText))},n.onerror=function(){o(new Error(n.statusText))},n.send()})},getScriptFromURL:function(e,t){var o=STYLEV.VALIDATOR;return new Promise(function(n,s){var a=document.createElement("script");a.src=e,a.classList.add("stylev-ignore"),a.addEventListener("load",function(){n()}),a.addEventListener("error",function(e){s(new URIError("The script "+e.target.src+" is not accessible."))}),t?t.appendChild(a):o.head.appendChild(a)})},insertJS4Bookmarklet:function(){var e=STYLEV.VALIDATOR;if(STYLEV.isBookmarklet){var t=[],o=document.createDocumentFragment();STYLEV.METHODS.each(e.JS_PATHES,function(n){return document.querySelectorAll('script[src="'+n+'"]').length?"continue":void t.push(e.getScriptFromURL(n,o))}),e.head.appendChild(o)}return t},insertGA:function(){var e=STYLEV.VALIDATOR;void 0!==e.scriptTagGA&&e.scriptTagGA.parentElement.removeChild(e.scriptTagGA),e.scriptTagGA=document.createElement("script"),e.scriptTagGA.src=e.settings.GA_PATH,e.scriptTagGA.async="async",e.scriptTagGA.id="stylev-ga",e.scriptTagGA.classList.add("stylev-ignore"),e.head.appendChild(e.scriptTagGA)},updateOptions:function(){STYLEV.VALIDATOR;return new Promise(function(e,t){STYLEV.isChromeExtension?chrome.storage.sync.get("options",function(t){void 0!==t.options&&(STYLEV.options={ENABLE_MUTATION_OBSERVER:t.options.enabledMutationObserver,ENABLE_AUTO_EXECUTION:t.options.enableAutoExecution,ENABLE_ANIMATION:t.options.enableAnimation,SCOPE_SELECTORS:t.options.scopeSelectors,SCOPE_SELECTORS_TEXT:t.options.scopeSelectorsText?t.options.scopeSelectorsText.split(","):"",IGNORE_SELECTORS:t.options.ignoreSelectors,IGNORE_SELECTORS_TEXT:t.options.ignoreSelectorsText?t.options.ignoreSelectorsText.split(","):"",URL_FILTERS:t.options.urlFilters}),e()}):e()})},validate:function(e){console.info("Style Validator: Validator is starting..."),console.time("Style Validator Execution");var t=STYLEV.VALIDATOR;t.initializeBeforeValidation();for(var o=0;o<t.allElemLength;o=o+1|0){var n={};n.targetElem=t.allElem[o],n.targetElemTagName=n.targetElem.tagName.toLowerCase(),n.targetElemDefault=t.iframeDocument.querySelector(n.targetElemTagName);var s=t.regexAllHTMLTag.test(" "+n.targetElemTagName+" ");if(s&&"style"!==n.targetElemTagName){n.targetElemStyles=getComputedStyle(n.targetElem,""),n.targetParentElem=n.targetElem.parentElement||null,n.targetParentElem&&(n.targetElemParentStyles=getComputedStyle(n.targetParentElem,""),n.targetElemParentDisplayProp=n.targetElemParentStyles.getPropertyValue("display")),n.targetElemDisplayPropVal=n.targetElemStyles.getPropertyValue("display"),n.targetElemDefaultDisplayProp=t.getStyle(n.targetElemDefault,"display");var a=t.regexEmptyElem.test(" "+n.targetElemTagName+" "),r=t.regexReplacedElem.test(" "+n.targetElemTagName+" ");"html"!==n.targetElemTagName;STYLEV.METHODS.each(t.rulesData,function(e){var o=!0,s=e["base-styles"],i=e["ng-styles"],l=e.replaced,c=e.empty,d="";return n.isDisplayPropChanged=!1,"Replaced elements"!==l||r?"Non-replaced elements"===l&&r?"continue":"Empty elements"!==c||a?(STYLEV.METHODS.each(s,function(e,t){""!==d&&(d+=" "),d+=e+": ",d+=t+";";var s=getComputedStyle(n.targetElem,"").getPropertyValue(e),a=t===s;return a?void 0:(o=!1,"break")}),void(o&&STYLEV.METHODS.each(i,function(o,s){STYLEV.METHODS.each(s,function(s,a){t.detectError(o,s,a,e,n,d)})}))):"continue":"continue"}),t.toggleSelectedClassBasedOnOwnClass(n)}}return t.removeIframe4getDefaultStyles(),t.send2db(),t.isSameWithPreviousData()?!1:(t.showConsole(),t.setParametersAfterShowingConsole(),t.bind2targetElements(),"function"==typeof e&&e(),t.insertGA(),console.info("Style Validator: Validated and Console has been displayed"),console.timeEnd("Style Validator Execution"),t.moManager.connect(),STYLEV.isValidated=!0,void(STYLEV.isChromeExtension&&STYLEV.CHROME_EXTENSION.syncStatusIsValidated(!0)))},toggleSelectedClassBasedOnOwnClass:function(e){e.targetElem.classList.contains("stylev-target-error")||e.targetElem.classList.contains("stylev-target-warning")||e.targetElem.classList.remove("stylev-target-selected")},detectError:function(e,t,o,n,s,a){var r,i,l,c=STYLEV.VALIDATOR,d={},E=e.split("-"),m=s.targetParentElem&&"parent"===E[0],u="pseudo"===E[0]?E[1]:null,g=c.getStyle(s.targetElemDefault,t,u),T=c.getStyle(s.targetElem,t,u);o instanceof Array&&(i=o[1]||"",l=o[2]||"",o=o[0]);var S=0===o.indexOf("!"),h=o.match(/^!{0,1}\[(.+)\]$/);o=h?h[1]:o.replace("!","");var p=o.split("|").length>1;if(o=p?o.split("|"):o,r=p?new RegExp(" "+o.join(" | ")+" "):new RegExp(" "+o+" "),s.targetParentElem){var L=s.targetElemParentStyles.getPropertyValue(t);if("line-height"===t){var v=parseFloat(s.targetElemStyles.getPropertyValue("font-size")),y=parseFloat(s.targetElemParentStyles.getPropertyValue("font-size")),f=y/v,O=1.14;T="normal"===T?v*O+"px":T,L="normal"===L?c.controlFloat(y*O,1)+"px":L}}var V=r.test(" "+T+" "),C=parseInt(T,10)>0,A=parseInt(T,10)<0,R=0===parseInt(T,10),D=T===g,_=c.controlFloat(parseFloat(T)*f,1)!==c.controlFloat(parseFloat(L),1),I=T===L,Y=r.test(" "+s.targetElemParentDisplayProp+" ");(!S&&V||!S&&"over-0"===o&&C||!S&&"under-0"===o&&A||!S&&"default"===o&&D||!S&&"inherit"===o&&"line-height"===t&&_||!S&&"inherit"===o&&I||!S&&m&&Y||S&&"0"===o&&!R||S&&"default"===o&&!D||S&&"inherit"===o&&"line-height"===t&&!_||S&&"inherit"===o&&!I||S&&m&&!Y)&&(s.targetElem.classList.contains("stylev-target-error")||s.targetElem.classList.contains("stylev-target-warning")||(c.elemIndex=c.elemIndex+1|0),s.targetElem.dataset.stylevid=c.elemIndex,m?d.messageText="["+n.title+"] <"+s.targetElemTagName+"> "+a&&"{"+a+"} Parent element's style is {"+t+": "+L+";} "+i:d.messageText="["+n.title+"] <"+s.targetElemTagName+"> "+a&&"{"+a+"} {"+t+": "+T+";} "+i,d.ruleID=n["rule-id"],d.rule=n,d.ngStyle={},d.ngStyle[t]=o,d.tagName=s.targetElemTagName,n["base-styles"]&&(d.baseStyle=n["base-styles"]),d.targetStyle={},d.targetStyle[t]=T,m&&(d.targetParentStyle={},d.targetParentStyle[t]=L),d.reason=i,d.referenceURL=l,d.stylevid=s.targetElem.dataset.stylevid,d.riskLevel=E[E.length-2],c.resultArray.push(d),"error"===d.riskLevel&&s.targetElem.classList.add("stylev-target-error"),"warning"===d.riskLevel&&s.targetElem.classList.add("stylev-target-warning"))},send2db:function(){var e=STYLEV.VALIDATOR,t=new XMLHttpRequest,o="http://localhost:8001/send2db",n="POST",s={};s.time=(new Date).getTime(),s.ua=navigator.userAgent,s.result=e.resultArray;var a=JSON.stringify(s,null,"	");console.dir(s),t.open(n,o,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.addEventListener("load",function(){200===t.status?e.showSuccessMsg():e.showErrorMsg()}),t.addEventListener("error",e.showErrorMsg),4!=t.readyState&&t.send(a)},showSuccessMsg:function(){console.info("Style Validator: Sent result to database successfully")},showErrorMsg:function(e){console.error(e)},initializeBeforeValidation:function(){var e=STYLEV.VALIDATOR;STYLEV.isValidated&&e.destroy(),e.allElem=document.querySelectorAll("*:not(.stylev-ignore)"),e.allElemLength=e.allElem.length,e.insertCSS4bookmarklet(),e.resultArray=[],e.errorNum=0,e.warningNum=0,e.elemIndex=0,e.initializeVariables4observer(),e.clearObservationTimer(),e.clearConsoleRefreshTimer(),e.resetRefreshButton(),e.showMessageFromObserver(),e.insertIframe4getDefaultStyles(),e.setStyleDataBySelectors(document),e.setStyleDataByElements(document),e.setStyleDataBySelectors(e.iframeDocument),e.setStyleDataByElements(e.iframeDocument)},getOpenTag:function(e){return e?e.outerHTML.match(/<[a-zA-Z]+(>|.*?[^?]>)/g)[0]:""},isEqualWithOpenTag:function(e,t){var o=STYLEV.VALIDATOR;return o.getOpenTag(e)===o.getOpenTag(t)},setupMutationObserver:function(){var e=STYLEV.VALIDATOR,t=["style","class"],o={childList:!0,subtree:!0,attributes:!0,attributeFilter:t,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0},n=null,s=function(t){var o=t.length,s=[];e:for(var a=0;o>a;a=a+1|0){for(var r=t[a],i=r.target,l=i.tagName.toLowerCase(),c="<"+l+">",d=e.getOpenTag(i),E=r.type,m=r.addedNodes,u=m.length,g=r.removedNodes,T=g.length,S=STYLEV.ignoreTargetsArray,h=S.length,p=0;h>p;p=p+1|0){var L=S[p],v=e.isEqualWithOpenTag(i,L);if(v)continue e}if(!i.classList.contains("stylev-ignore")){if("attributes"===E){var y=r.attributeName,f=i.getAttribute(y);if(r.oldValue===f)continue;s.push("******** Attributes has been changed ********\nOld:	"+y+'="'+r.oldValue+'"\nNew:	'+y+'="'+f+'"')}if("characterData"===E){var O=i.textContent;if(r.oldValue===O)continue;s.push("******** CharacterData has been changed ********\nOld:	"+r.oldValue+"\nNew:	"+O)}if("childList"===E){for(var V=0;T>V;V=V+1|0){var C,A=g[V],R=1===A.nodeType,D=3===A.nodeType;if(R&&"script"===A.tagName.toLowerCase()&&-1!==A.src.indexOf("analytics.js"))continue e;R&&(C=A.outerHTML),D&&(C=A.wholeText),s.push("******** Removed from "+c+" ********\n"+C)}for(var _=0;u>_;_=_+1|0){var I,Y=m[_],N=1===Y.nodeType,M=3===Y.nodeType;if(N&&"script"===Y.tagName.toLowerCase()&&-1!==Y.src.indexOf("analytics.js"))continue e;N&&(I=Y.outerHTML),M&&(I=Y.wholeText),s.push("******** Added into "+c+" ********\n"+I)}}e.isIgnore=!1,void 0===i.dataset_moid&&(i.dataset_moid=++STYLEV.moid);var H=n&&n.dataset_moid?i.dataset_moid===n.dataset_moid:!1,w=n?e.isEqualWithOpenTag(i,n):!1;H||(s.unshift("==================================================\n"+d),e.moMessageArray.push.apply(e.moMessageArray,s),s=[]),H||w?STYLEV.sameElemCount=STYLEV.sameElemCount+1|0:STYLEV.sameElemCount=0,STYLEV.sameElemCount>5&&(STYLEV.sameElemCount=0,console.info("Style Validator: Ignored the following element\n"+d),S.push(i)),n=i,console.info("Style Validator: DOM has been modified...")}}e.clearObservationTimer(),e.clearConsoleRefreshTimer(),e.isIgnore||(e.informModification(),e.countdownDynamicSecond=e.COUNTDOWN_DEFAULT_SECOND,e.consoleRefreshCount.textContent=e.COUNTDOWN_DEFAULT_SECOND,e.consoleRefreshTimer=setInterval(e.countDownConsoleRefreshCount,1e3),e.observationTimer=setTimeout(e.executeWithDetectingCE,e.settings.OBSERVATION_INTERVAL))};return e.COUNTDOWN_DEFAULT_SECOND=+e.settings.OBSERVATION_INTERVAL/1e3,e.moMessageArray=[],e.isIgnore=!0,e.observer=new MutationObserver(s),{connect:function(){return STYLEV.options.ENABLE_MUTATION_OBSERVER?void(e.isObserving||(e.observer.observe(e.body,o),e.observer.observe(e.head,o),e.isObserving=!0,console.info("Style Validator: Mutation Observer has connected"))):!1},disconnect:function(){return STYLEV.options.ENABLE_MUTATION_OBSERVER?void(e.isObserving&&(clearTimeout(e.observationTimer),clearTimeout(e.resetTImer),e.observer.disconnect(),e.isObserving=!1,console.info("Style Validator: Mutation Observer has disconnected"))):!1}}},executeWithDetectingCE:function(){var e=STYLEV.VALIDATOR;STYLEV.isChromeExtension&&STYLEV.CHROME_EXTENSION.execute(),STYLEV.isBookmarklet&&e.execute()},resetRefreshButton:function(){var e=STYLEV.VALIDATOR;e.isModified&&(e.isModified=!1,e.consoleRefreshButtonImage.src=e.settings.ICON_REFRESH_PATH,e.consoleRefreshButtonImage.classList.remove("stylev-console-refresh-button-image-active"))},clearObservationTimer:function(){var e=STYLEV.VALIDATOR;void 0!==e.observationTimer&&(clearTimeout(e.observationTimer),e.observationTimer=void 0)},clearConsoleRefreshTimer:function(){var e=STYLEV.VALIDATOR;void 0!==e.consoleRefreshTimer&&(clearTimeout(e.consoleRefreshTimer),e.consoleRefreshTimer=void 0)},showMessageFromObserver:function(){var e=STYLEV.VALIDATOR;e.moMessageArray instanceof Array&&e.moMessageArray.length&&(console.groupCollapsed("Style Validator: Modified Elements Data"),console.info(e.moMessageArray.join("\n\n")),console.groupEnd())},initializeVariables4observer:function(){var e=STYLEV.VALIDATOR;e.isIgnore=!0,e.isModified=!1},isSameWithPreviousData:function(){STYLEV.VALIDATOR;return!1},insertCSS4bookmarklet:function(){var e=STYLEV.VALIDATOR;if(STYLEV.isBookmarklet){var t=document.createDocumentFragment();e.linkTags=[],STYLEV.METHODS.each(e.CSS_PATHES,function(o){if(document.querySelectorAll('link[href="'+o+'"]').length)return"continue";var n=document.createElement("link");n.id=e.settings.STYLESHEET_ID,n.rel="stylesheet",n.classList.add("stylev-ignore"),n.href=o,e.linkTags.push(n),t.appendChild(n)}),e.head.appendChild(t)}},removeStylesheet:function(){var e=STYLEV.VALIDATOR;STYLEV.METHODS.each(e.linkTags,function(e){e.parentElement.removeChild(e)})},removeConsole:function(){var e=STYLEV.VALIDATOR;void 0!==e.consoleWrapper&&e.consoleWrapper.parentElement.removeChild(e.consoleWrapper),void 0!==e.html&&e.html.style.setProperty("border-bottom-width",e.htmlDefaultBorderBottomWidth,"")},insertIframe4getDefaultStyles:function(){var e=STYLEV.VALIDATOR;e.iframe4test=document.createElement("iframe"),e.iframe4test.id="stylev-dummy-iframe",e.iframe4test.classList.add("stylev-ignore"),e.html.appendChild(e.iframe4test),e.iframeWindow=e.iframe4test.contentWindow,e.iframeDocument=e.iframeWindow.document,e.iframeBody=e.iframeDocument.querySelector("body");var t=document.createDocumentFragment();STYLEV.METHODS.each(e.tagsAllData,function(e,o){t.appendChild(document.createElement(e))}),e.iframeBody.appendChild(t)},removeIframe4getDefaultStyles:function(){var e=STYLEV.VALIDATOR;e.iframe4test.parentElement.removeChild(e.iframe4test)},removeAllAttrAndEvents:function(){var e=STYLEV.VALIDATOR;STYLEV.METHODS.each(e.allElem,function(t){t.removeAttribute("data-stylevid"),t.removeAttribute("data-stylevclass"),t.classList.remove("stylev-target-error"),t.classList.remove("stylev-target-warning"),t.classList.remove("stylev-target-selected"),t.removeEventListener("click",STYLEV.CHROME_DEVTOOLS.inspectFromTargets),t.removeEventListener("click",e.markElementFromTargets)}),void 0!==e.html&&e.html.removeEventListener("keyup",e.destroyByEsc)},informModification:function(){var e=STYLEV.VALIDATOR;return e.isModified?!1:(e.countdownDynamicSecond=e.COUNTDOWN_DEFAULT_SECOND,e.isModified=!0,e.consoleRefreshButtonImage.src=e.settings.ICON_REFRESH_ACTIVE_PATH,void e.consoleRefreshButtonImage.classList.add("stylev-console-refresh-button-image-active"))},countDownConsoleRefreshCount:function(){var e=STYLEV.VALIDATOR;e.consoleRefreshCount.textContent=--e.countdownDynamicSecond,e.countdownDynamicSecond<=0&&clearInterval(e.consoleRefreshTimer)},insertStyle2ShadowDOM:function(){var e=STYLEV.VALIDATOR;e.consoleWrapperShadowRoot.innerHTML='<style>@import "'+e.RESOURCE_ROOT+'style-validator-for-console.css";</style>'},showConsole:function(){var e=STYLEV.VALIDATOR;e.docFlag=document.createDocumentFragment(),e.consoleWrapper=document.createElement("div"),e.consoleWrapperShadowRoot=e.consoleWrapper.createShadowRoot(),e.consoleHeader=document.createElement("header"),e.consoleHeading=document.createElement("h1"),e.consoleHeadingLogo=document.createElement("a"),e.consoleHeadingLogoImage=document.createElement("img"),e.consoleMode=document.createElement("p"),e.consoleButtons=document.createElement("div"),e.consoleRefreshButton=document.createElement("a"),e.consoleRefreshCount=document.createElement("output"),e.consoleRefreshButtonImage=document.createElement("img"),e.consoleCounter=document.createElement("div"),e.consoleBody=document.createElement("div"),e.consoleList=document.createElement("ul"),e.consoleCloseButton=document.createElement("a"),e.consoleCloseButtonImage=document.createElement("img"),e.consoleMinimizeButton=document.createElement("a"),e.consoleMinimizeButtonImage=document.createElement("img"),e.consoleNormalizeButton=document.createElement("a"),e.consoleNormalizeButtonImage=document.createElement("img"),e.isMouseDownConsoleHeader=!1,e.consoleStartPosY=0,e.consoleCurrentPosY=0,e.consoleDiffPosY=0,e.consoleWrapper.id=e.settings.CONSOLE_WRAPPER_ID,e.consoleWrapper.classList.add("stylev-ignore"),e.consoleList.id=e.settings.CONSOLE_LIST_ID,e.consoleHeader.classList.add("stylev-console-header"),e.consoleHeading.classList.add("stylev-console-heading"),e.consoleHeadingLogo.classList.add("stylev-console-heading-logo"),e.consoleHeadingLogo.href="http://style-validator.github.io/",e.consoleHeadingLogo.target="_blank",e.consoleHeadingLogoImage.classList.add("stylev-console-heading-logo-image"),e.consoleHeadingLogoImage.src=e.settings.ICON_LOGO_PATH,e.consoleMode.classList.add("stylev-console-mode"),e.consoleButtons.classList.add("stylev-console-buttons"),e.consoleRefreshButton.href="javascript: void(0);",e.consoleRefreshButton.classList.add("stylev-console-refresh-button"),e.consoleRefreshCount.classList.add("stylev-console-refresh-count"),e.consoleRefreshButtonImage.classList.add("stylev-console-refresh-button-image"),e.consoleRefreshButtonImage.src=e.settings.ICON_REFRESH_PATH,e.consoleCounter.classList.add("stylev-console-counter"),e.consoleBody.classList.add("stylev-console-body"),e.consoleList.classList.add("stylev-console-list"),e.consoleCloseButton.href="javascript: void(0);",e.consoleCloseButton.classList.add("stylev-console-close-button"),e.consoleCloseButtonImage.classList.add("stylev-console-close-button-image"),e.consoleCloseButtonImage.src=e.settings.ICON_CLOSE_PATH,e.consoleMinimizeButton.href="javascript: void(0);",e.consoleMinimizeButton.classList.add("stylev-console-minimize-button"),e.consoleMinimizeButtonImage.classList.add("stylev-console-minimize-button-image"),e.consoleMinimizeButtonImage.src=e.settings.ICON_MINIMIZE_PATH,e.consoleNormalizeButton.href="javascript: void(0);",e.consoleNormalizeButton.hidden=!0,e.consoleNormalizeButton.classList.add("stylev-console-normalize-button"),e.consoleNormalizeButtonImage.classList.add("stylev-console-normalize-button-image"),e.consoleNormalizeButtonImage.src=e.settings.ICON_NORMALIZE_PATH,e.insertStyle2ShadowDOM(),e.createMessagesInConsole(),e.bindEvents2Console(),e.consoleHeadingText=document.createTextNode(e.settings.CONSOLE_HEADING_TEXT),e.consoleCounter.textContent="Total: "+e.resultArray.length+" / Error: "+e.errorNum+" / Warning: "+e.warningNum,e.consoleHeadingLogo.appendChild(e.consoleHeadingLogoImage),e.consoleHeading.appendChild(e.consoleHeadingLogo),e.consoleRefreshButton.appendChild(e.consoleRefreshCount),e.consoleRefreshButton.appendChild(e.consoleRefreshButtonImage),e.consoleNormalizeButton.appendChild(e.consoleNormalizeButtonImage),e.consoleMinimizeButton.appendChild(e.consoleMinimizeButtonImage),e.consoleCloseButton.appendChild(e.consoleCloseButtonImage),e.consoleButtons.appendChild(e.consoleRefreshButton),e.consoleButtons.appendChild(e.consoleMinimizeButton),e.consoleButtons.appendChild(e.consoleNormalizeButton),e.consoleButtons.appendChild(e.consoleCloseButton),e.consoleHeader.appendChild(e.consoleHeading),e.consoleHeader.appendChild(e.consoleButtons),e.consoleHeader.appendChild(e.consoleCounter),e.consoleHeader.appendChild(e.consoleMode),e.consoleWrapperShadowRoot.appendChild(e.consoleHeader),e.consoleWrapperShadowRoot.appendChild(e.consoleBody),e.consoleList.appendChild(e.docFlag),e.consoleBody.appendChild(e.consoleList),e.html.appendChild(e.consoleWrapper),e.doAfterShowingConsole()},doAfterShowingConsole:function(){var e=STYLEV.VALIDATOR;setTimeout(function(){e.toggleConsole(),e.consoleWrapperDynamicHeight=parseInt(e.consoleWrapper.offsetHeight,10),e.html.style.setProperty("border-bottom-width",e.consoleWrapperDynamicHeight+"px","important"),e.send2ChromeExtension(),e.restorePreviousCondition()},0)},send2ChromeExtension:function(){var e=STYLEV.VALIDATOR;STYLEV.isChromeExtension&&(chrome.runtime.sendMessage({name:"setBadgeText",badgeText:e.resultArray.length}),chrome.runtime.sendMessage({name:"switchMode"},function(t){if(void 0!==t.isConnected2Devtools){var o=document.createElement("img"),n=document.createTextNode(t.isConnected2Devtools?e.settings.CONNECTED_2_DEVTOOLS_MESSAGE:e.settings.DISCONNECTED_2_DEVTOOLS_MESSAGE);o.classList.add("stylev-console-mode-image"),o.src=t.isConnected2Devtools?e.settings.ICON_CONNECTED_PATH:e.settings.ICON_DISCONNECTED_PATH,e.consoleMode.appendChild(o),e.consoleMode.appendChild(n),e.consoleMode.classList.add(t.isConnected2Devtools?e.settings.CONNECTED_2_DEVTOOLS_CLASS:e.settings.DISCONNECTED_2_DEVTOOLS_CLASS)}}))},restorePreviousCondition:function(){var e=STYLEV.VALIDATOR;if(setTimeout(function(){e.consoleList.scrollTop=STYLEV.consoleScrollTop},0),e.consoleList.addEventListener("scroll",function(e){STYLEV.consoleScrollTop=e.currentTarget.scrollTop}),"function"==typeof STYLEV.CHROME_DEVTOOLS.inspectOfConsoleAPI&&STYLEV.CHROME_DEVTOOLS.inspectOfConsoleAPI(),STYLEV.selectedConsoleLine){var t=e.consoleList.querySelectorAll("li");STYLEV.METHODS.each(t,function(e){return e.isEqualNode(STYLEV.selectedConsoleLine)?(e.classList.add("stylev-trigger-selected"),"break"):void 0})}},createMessagesInConsole:function(){var e=STYLEV.VALIDATOR;0===e.resultArray.length?(e.congratulationsMessage=document.createElement("li"),e.congratulationsMessage.classList.add("stylev-console-perfect"),e.congratulationsMessage.textContent=e.settings.CONGRATULATION_MESSAGE_TEXT,e.docFlag.appendChild(e.congratulationsMessage)):STYLEV.METHODS.each(e.resultArray,function(t){var o=document.createElement("li"),n=document.createElement("a"),s=document.createElement("span"),a=document.createElement("a");n.href="javascript: void(0);",n.addEventListener("click",e.markElementFromConsole),n.textContent=t.messageText,s.textContent=t.stylevid,a.textContent="?",n.dataset.stylevconsoleid=t.stylevid,n.classList.add("stylev-console-list-anchor"),s.classList.add("stylev-console-list-logid"),a.classList.add("stylev-console-list-reference"),a.href=t.referenceURL,"error"===t.riskLevel&&(o.classList.add("stylev-trigger-error"),e.errorNum=e.errorNum+1|0),"warning"===t.riskLevel&&(o.classList.add("stylev-trigger-warning"),e.warningNum=e.warningNum+1|0),o.appendChild(n),t.referenceURL&&s.appendChild(a),o.appendChild(s),e.docFlag.appendChild(o)})},setParametersAfterShowingConsole:function(){var e=STYLEV.VALIDATOR;e.markedTargets=document.querySelectorAll(".stylev-target-error, .stylev-target-warning"),e.consoleListItems=e.consoleList.querySelectorAll(":scope > li"),e.consoleTriggers=e.consoleList.querySelectorAll("a[data-stylevconsoleid]")},bindEvents2Console:function(){var e=STYLEV.VALIDATOR;e.consoleWrapper.addEventListener("click",e.stopPropagation),e.consoleHeader.addEventListener("mousedown",e.initConsoleHeader),e.html.addEventListener("mousemove",e.moveConsoleHeader),e.html.addEventListener("mouseup",e.offConsoleHeader),e.consoleCloseButton.addEventListener("click",e.destroy),e.consoleRefreshButton.addEventListener("click",e.executeWithDetectingCE),e.consoleMinimizeButton.addEventListener("click",e.toggleConsole),e.consoleNormalizeButton.addEventListener("click",e.toggleConsole),e.html.addEventListener("keyup",e.destroyByEsc)},stopPropagation:function(e){e.stopPropagation()},initConsoleHeader:function(e){e.stopPropagation();var t=STYLEV.VALIDATOR;t.isMouseDownConsoleHeader=!0,t.consoleStartPosY=e.pageY},moveConsoleHeader:function(e){e.stopPropagation();var t=STYLEV.VALIDATOR;t.isMouseDownConsoleHeader&&(t.consoleCurrentPosY=e.pageY,t.consoleDiffPosY=t.consoleStartPosY-t.consoleCurrentPosY,t.consoleWrapper.style.setProperty("height",t.consoleWrapperDynamicHeight+t.consoleDiffPosY+"px",""),e.currentTarget.style.setProperty("border-bottom-width",t.consoleWrapperDynamicHeight+t.consoleDiffPosY+"px","important"),30===t.consoleWrapper.offsetHeight?(t.consoleNormalizeButton.hidden=!1,t.consoleMinimizeButton.hidden=!0):t.consoleWrapper.offsetHeight>30&&(t.consoleNormalizeButton.hidden=!0,t.consoleMinimizeButton.hidden=!1))},offConsoleHeader:function(e){e.stopPropagation();var t=STYLEV.VALIDATOR;t.isMouseDownConsoleHeader&&(t.consoleWrapperDynamicHeight=parseInt(t.consoleWrapper.offsetHeight,10)),t.isMouseDownConsoleHeader=!1},destroyByEsc:function(e){var t=STYLEV.VALIDATOR,o=27;e.keyCode===o&&t.destroy()},markElementFromConsole:function(e){e.preventDefault(),e.stopPropagation();var t=STYLEV.VALIDATOR;t.moManager.disconnect();var o=t.consoleList.querySelectorAll(":scope > li");STYLEV.METHODS.each(o,function(e){e.classList.remove("stylev-trigger-selected")});var n=t.consoleList.querySelectorAll('a[data-stylevconsoleid="'+e.currentTarget.dataset.stylevconsoleid+'"]');STYLEV.METHODS.each(n,function(e,t){e.parentElement.classList.add("stylev-trigger-selected"),0===t&&(STYLEV.selectedConsoleLine=e.parentElement)}),STYLEV.METHODS.each(t.allElem,function(e){e.classList.remove("stylev-target-selected")});var s=document.querySelector('[data-stylevid="'+e.target.dataset.stylevconsoleid+'"]');s.classList.add("stylev-target-selected"),STYLEV.METHODS.smoothScroll.execute(s),t.moManager.connect()},bind2targetElements:function(){var e=STYLEV.VALIDATOR;return 0===e.resultArray.length?!1:void STYLEV.METHODS.each(e.markedTargets,function(t){t.addEventListener("click",e.markElementFromTargets)})},markElementFromTargets:function(e){e.stopPropagation(),e.preventDefault();var t=STYLEV.VALIDATOR;t.moManager.disconnect(),STYLEV.METHODS.each(t.consoleListItems,function(e){e.classList.remove("stylev-trigger-selected")});var o=t.consoleList.querySelectorAll('a[data-stylevconsoleid="'+e.currentTarget.dataset.stylevid+'"]');STYLEV.METHODS.each(o,function(e,t){e.parentElement.classList.add("stylev-trigger-selected"),0===t&&(STYLEV.selectedConsoleLine=e.parentElement)}),STYLEV.METHODS.each(t.allElem,function(e){e.classList.remove("stylev-target-selected")});var n=document.querySelector('[data-stylevid="'+e.currentTarget.dataset.stylevid+'"]');n.classList.add("stylev-target-selected");var s=o[0].offsetTop;t.consoleList.scrollTop=s,t.moManager.connect()},controlFloat:function(e,t){return Math.round(parseFloat(e)*Math.pow(10,t))/Math.pow(10,t)},destroy:function(e){var t=STYLEV.VALIDATOR,o=e&&e.currentTarget.className===t.consoleCloseButton.className;t.removeAllAttrAndEvents(),t.removeConsole(),void 0!==t.moManager&&t.moManager.disconnect(),STYLEV.isBookmarklet&&o&&t.removeStylesheet(),STYLEV.isValidated=!1,STYLEV.isChromeExtension&&STYLEV.CHROME_EXTENSION.syncStatusIsValidated(!1),console.info("Style Validator: Style Validator has removed.")},toggleConsole:function(e){var t=STYLEV.VALIDATOR,o=STYLEV.scaleMode;e&&e.type?("normal"===o&&t.minimizeConsole(),"minimum"===o&&t.normalizeConsole()):("normal"===o&&t.normalizeConsole(),"minimum"===o&&t.minimizeConsole())},minimizeConsole:function(){var e=STYLEV.VALIDATOR;e.consoleMinimizeButton.hidden=!0,e.consoleNormalizeButton.hidden=!1,e.consoleWrapper.style.setProperty("height",e.consoleHeader.style.getPropertyValue("height"),""),e.consoleWrapperDynamicHeight=e.consoleWrapper.offsetHeight,STYLEV.scaleMode="minimum"},normalizeConsole:function(){var e=STYLEV.VALIDATOR;e.consoleMinimizeButton.hidden=!1,e.consoleNormalizeButton.hidden=!0,e.consoleWrapper.style.setProperty("height",STYLEV.consoleWrapperDynamicHeight||e.settings.CONSOLE_WRAPPER_DEFAULT_HEIGHT+"px",""),e.consoleWrapperDynamicHeight=e.consoleWrapper.offsetHeight,STYLEV.scaleMode="normal"},setStyleDataBySelectors:function(e){var t=(STYLEV.VALIDATOR,e||document),o=t.styleSheets;STYLEV.METHODS.each(o,function(e){var o=e.cssRules;return null===o?"continue":void STYLEV.METHODS.each(o,function(e){if(e.media||void 0===e.style||void 0===e.selectorText)return"continue";var o=e.selectorText,n=e.style,s=n.width?n.width:"auto",a=n.height?n.height:"auto",r=n.getPropertyPriority("width"),i=n.getPropertyPriority("height"),l=SPECIFICITY.calculate(o);STYLEV.METHODS.each(l,function(e){var o=e.selector,n=parseInt(e.specificity.replace(/,/g,""),10);try{var l=t.querySelectorAll(o)}catch(c){return"continue"}STYLEV.METHODS.each(l,function(e){var t=e.style,o=t.width?t.width:"auto",l=t.height?t.height:"auto",c=o?1e3:n,d=l?1e3:n,E=t.getPropertyPriority("width"),m=t.getPropertyPriority("height");void 0===e.dataset_stylevwidthspecificity&&(e.dataset_stylevwidthspecificity=c),void 0===e.dataset_stylevheightspecificity&&(e.dataset_stylevheightspecificity=d),void 0===e.dataset_stylevwidthimportant&&(e.dataset_stylevwidthimportant=E),void 0===e.dataset_stylevheightimportant&&(e.dataset_stylevheightimportant=m),s&&!o&&c>=parseInt(e.dataset_stylevwidthspecificity,10)&&r.length>=e.dataset_stylevwidthimportant.length&&(e.dataset_stylevwidth=s,
e.dataset_stylevwidthspecificity=c,e.dataset_stylevwidthimportant=r),s&&r&&!E&&c>=parseInt(e.dataset_stylevwidthspecificity,10)&&r.length>=e.dataset_stylevwidthimportant.length&&(e.dataset_stylevwidth=s,e.dataset_stylevwidthspecificity=c,e.dataset_stylevwidthimportant=r),s&&!r&&o&&c>=parseInt(e.dataset_stylevwidthspecificity,10)&&E.length>=e.dataset_stylevwidthimportant.length&&(e.dataset_stylevwidth=o,e.dataset_stylevwidthspecificity=c,e.dataset_stylevwidthimportant=E),o&&E&&c>=parseInt(e.dataset_stylevwidthspecificity,10)&&E.length>=e.dataset_stylevwidthimportant.length&&(e.dataset_stylevwidth=o,e.dataset_stylevwidthspecificity=c,e.dataset_stylevwidthimportant=E),a&&!l&&d>=parseInt(e.dataset_stylevheightspecificity,10)&&E.length>=e.dataset_stylevheightimportant.length&&(e.dataset_stylevheight=a,e.dataset_stylevheightspecificity=d,e.dataset_stylevheightimportant=m),a&&i&&l&&d>=parseInt(e.dataset_stylevheightspecificity,10)&&E.length>=e.dataset_stylevheightimportant.length&&(e.dataset_stylevheight=a,e.dataset_stylevheightspecificity=d,e.dataset_stylevheightimportant=m),a&&!i&&l&&d>=parseInt(e.dataset_stylevheightspecificity,10)&&E.length>=e.dataset_stylevheightimportant.length&&(e.dataset_stylevheight=l,e.dataset_stylevheightspecificity=d,e.dataset_stylevheightimportant=m),l&&m&&d>=parseInt(e.dataset_stylevheightspecificity,10)&&E.length>=e.dataset_stylevheightimportant.length&&(e.dataset_stylevheight=l,e.dataset_stylevheightspecificity=d,e.dataset_stylevheightimportant=m)})})})})},setStyleDataByElements:function(e){var t=e||document,o=t.querySelectorAll("*:not(.stylev-ignore)");STYLEV.METHODS.each(o,function(e,t){if(void 0===e.dataset_stylevwidth){var o=e.style.getPropertyValue("width");o?e.dataset_stylevwidth=o:e.dataset_stylevwidth="auto"}if(void 0===e.dataset_stylevheight){var n=e.style.getPropertyValue("height");n?e.dataset_stylevheight=n:e.dataset_stylevheight="auto"}})},getStyle:function(e,t,o){var n,s=o||null,a=getComputedStyle(e,s).getPropertyValue(t);return"width"===t||"height"===t?("width"===t&&(n=e.dataset_stylevwidth),"height"===t&&(n=e.dataset_stylevheight)):n=a,n}},STYLEV.METHODS={smoothScroll:{getOffsetTop:function(e){return"html"===e.nodeName.toLowerCase()?-window.pageYOffset:e.getBoundingClientRect().top+window.pageYOffset},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},getTargetPos:function(e,t,o,n){var s=STYLEV.METHODS.smoothScroll;return o>n?t:e+(t-e)*s.easeInOutCubic(o/n)},execute:function(e,t){var o=STYLEV.METHODS.smoothScroll,t=t||500,n=window.pageYOffset,s=o.getOffsetTop(e)-100,a=Date.now(),r=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,15)},i=function(){var e=Date.now()-a;window.scroll(0,o.getTargetPos(n,s,e,t)),t>=e&&r(i)};i()}},each:function(e,t){function o(o){for(;o>r;r=r+1|0){var n=e[r];if(s=t(n,r),"continue"!==s&&"break"===s)break}}function n(){for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];if(s=t(o,n,r=r+1|0),"continue"===s)continue;if("break"===s)break}}var s,a=e&&"object"==typeof e&&"function"==typeof t,r=0;if(a)if("length"in e){var i=e.length||null;i?o(i):e instanceof Array||n()}else e instanceof Array||n()},findHEX:function(e){var t=STYLEV.METHODS,o=e.match(/#(?:[0-9a-f]{3}){1,2}/gi);return t.each(o,function(o){e=e.replace(o,t.hex2rgb(o))}),e},hex2rgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,o,n){return t+t+o+o+n+n});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o&&"rgb("+parseInt(o[1],16)+" ,"+parseInt(o[2],16)+" ,"+parseInt(o[3],16)+")"}},STYLEV.CHROME_EXTENSION={execute:function(){setTimeout(function(){chrome.runtime.sendMessage({name:"execute"})},0)},syncStatusIsValidated:function(e){setTimeout(function(){chrome.runtime.sendMessage({name:"syncStatusIsValidated",isValidated:e||STYLEV.isValidated})},0)}},STYLEV.CHROME_DEVTOOLS={execute:function(e){var t=STYLEV.CHROME_DEVTOOLS;return 0===STYLEV.VALIDATOR.resultArray.length?!1:(t.inspectOfConsoleAPI=e,void t.bindEvents())},bindEvents:function(){var e=STYLEV.CHROME_DEVTOOLS;STYLEV.METHODS.each(STYLEV.VALIDATOR.consoleTriggers,function(t){t.addEventListener("click",e.inspectFromConsole)}),STYLEV.METHODS.each(STYLEV.VALIDATOR.markedTargets,function(t){t.addEventListener("click",e.inspectFromTargets)})},inspectFromConsole:function(e){e.preventDefault(),e.stopPropagation();var t=STYLEV.CHROME_DEVTOOLS,o=e.currentTarget,n=o.dataset.stylevconsoleid,s=document.querySelector('[data-stylevid="'+n+'"]');try{t.inspectOfConsoleAPI(s)}catch(a){console.error(a)}},inspectFromTargets:function(e){e.preventDefault(),e.stopPropagation();var t=STYLEV.CHROME_DEVTOOLS,o=e.target;try{t.inspectOfConsoleAPI(o)}catch(n){console.error(n)}}},STYLEV.isChromeExtension&&(STYLEV.VALIDATOR.updateOptions().then(function(){STYLEV.options.ENABLE_AUTO_EXECUTION&&STYLEV.CHROME_EXTENSION.execute(),STYLEV.VALIDATOR.RESOURCE_ROOT=chrome.runtime.getURL("")}),chrome.storage.onChanged.addListener(function(e,t){"sync"===t&&e.options&&(e.options.newValue.enableAnimation?STYLEV.VALIDATOR.html.classList.add("stylev-animation"):STYLEV.VALIDATOR.html.classList.remove("stylev-animation"))})),STYLEV.isPassedURLFilters=!0,STYLEV.METHODS.each(STYLEV.options.URL_FILTERS,function(e){return e===location.href?(STYLEV.isPassedURLFilters=!1,"break"):void 0}),STYLEV.isBookmarklet&&(STYLEV.isPassedURLFilters?STYLEV.isLoaded?(console.groupEnd(),console.group("Style Validator: Executed by Bookmarklet."),STYLEV.VALIDATOR.execute()):STYLEV.isReloaded&&(console.groupEnd(),console.group("Style Validator: Executed by Bookmarklet (Replay)"),STYLEV.VALIDATOR.validate()):STYLEV.isPassedURLFilters=!0);